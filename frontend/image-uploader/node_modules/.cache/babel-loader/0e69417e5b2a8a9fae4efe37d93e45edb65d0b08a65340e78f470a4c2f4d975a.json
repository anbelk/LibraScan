{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[selectedImage,setSelectedImage]=useState(null);const[predictedClass,setPredictedClass]=useState(null);const[showManualLabeling,setShowManualLabeling]=useState(false);const[selectedManualClass,setSelectedManualClass]=useState(null);const[feedbackSubmitted,setFeedbackSubmitted]=useState(false);const handleImageChange=e=>{setSelectedImage(e.target.files[0]);setPredictedClass(null);setShowManualLabeling(false);setSelectedManualClass(null);setFeedbackSubmitted(false);};const handleSubmit=async()=>{if(!selectedImage)return;const formData=new FormData();formData.append('file',selectedImage);try{const response=await fetch('http://localhost:8000/predict',{method:'POST',body:formData});const data=await response.json();setPredictedClass(data.class);setShowManualLabeling(true);}catch(error){console.error('Error:',error);}};const handleManualLabel=classLabel=>{setSelectedManualClass(classLabel);console.log('Manual label selected:',classLabel);};const submitFeedback=()=>{setFeedbackSubmitted(true);console.log('Final class:',selectedManualClass);};const classes=['Class 1','Class 2','Class 3','Class 4'];return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-center mb-6\",children:\"Image Classifier\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-center mb-6\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"w-full flex flex-col items-center px-4 py-6 bg-white rounded-lg border-2 border-dashed border-blue-300 cursor-pointer hover:bg-blue-50\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-12 h-12 text-blue-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-2 text-base font-medium text-gray-700\",children:selectedImage?selectedImage.name:'Выберите изображение'}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageChange,className:\"hidden\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:!selectedImage,className:\"w-full py-3 px-4 rounded-md text-white font-medium \".concat(selectedImage?'bg-blue-500 hover:bg-blue-600':'bg-gray-400 cursor-not-allowed'),children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"}),predictedClass&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 p-4 bg-blue-50 rounded-md\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-center\",children:[\"\\u041F\\u0440\\u0435\\u0434\\u0441\\u043A\\u0430\\u0437\\u0430\\u043D\\u043D\\u044B\\u0439 \\u043A\\u043B\\u0430\\u0441\\u0441: \",/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:predictedClass})]})}),showManualLabeling&&!feedbackSubmitted&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-center mb-4\",children:\"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0442\\u0438\\u0442\\u044C \\u0432\\u0440\\u0443\\u0447\\u043D\\u0443\\u044E:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-2\",children:classes.map(classLabel=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleManualLabel(classLabel),className:\"py-2 px-4 rounded-md \".concat(selectedManualClass===classLabel?'bg-green-500 text-white':'bg-gray-200 hover:bg-gray-300'),children:classLabel},classLabel))}),selectedManualClass&&/*#__PURE__*/_jsx(\"button\",{onClick:submitFeedback,className:\"w-full mt-4 py-2 px-4 bg-green-500 text-white rounded-md hover:bg-green-600\",children:\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u044C \\u0432\\u044B\\u0431\\u043E\\u0440\"})]}),feedbackSubmitted&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 p-4 bg-green-50 text-green-700 text-center rounded-md\",children:\"\\u0412\\u0430\\u0448 \\u043E\\u0442\\u0432\\u0435\\u0442 \\u043F\\u0440\\u0438\\u043D\\u044F\\u0442\"})]})});}export default App;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","App","selectedImage","setSelectedImage","predictedClass","setPredictedClass","showManualLabeling","setShowManualLabeling","selectedManualClass","setSelectedManualClass","feedbackSubmitted","setFeedbackSubmitted","handleImageChange","e","target","files","handleSubmit","formData","FormData","append","response","fetch","method","body","data","json","class","error","console","handleManualLabel","classLabel","log","submitFeedback","classes","className","children","fill","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","d","name","type","accept","onChange","onClick","disabled","concat","map"],"sources":["/Users/kdbratsun/yaprofi/LibraScan/frontend/image-uploader/src/App.jsx"],"sourcesContent":["import React, { useState } from 'react';\n\nfunction App() {\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [predictedClass, setPredictedClass] = useState(null);\n  const [showManualLabeling, setShowManualLabeling] = useState(false);\n  const [selectedManualClass, setSelectedManualClass] = useState(null);\n  const [feedbackSubmitted, setFeedbackSubmitted] = useState(false);\n\n  const handleImageChange = (e) => {\n    setSelectedImage(e.target.files[0]);\n    setPredictedClass(null);\n    setShowManualLabeling(false);\n    setSelectedManualClass(null);\n    setFeedbackSubmitted(false);\n  };\n\n  const handleSubmit = async () => {\n    if (!selectedImage) return;\n\n    const formData = new FormData();\n    formData.append('file', selectedImage);\n\n    try {\n      const response = await fetch('http://localhost:8000/predict', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const data = await response.json();\n      setPredictedClass(data.class);\n      setShowManualLabeling(true);\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  };\n\n  const handleManualLabel = (classLabel) => {\n    setSelectedManualClass(classLabel);\n    console.log('Manual label selected:', classLabel);\n  };\n\n  const submitFeedback = () => {\n    setFeedbackSubmitted(true);\n    console.log('Final class:', selectedManualClass);\n  };\n\n  const classes = ['Class 1', 'Class 2', 'Class 3', 'Class 4'];\n\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4\">\n      <div className=\"w-full max-w-md bg-white rounded-lg shadow-md p-6\">\n        <h1 className=\"text-2xl font-bold text-center mb-6\">Image Classifier</h1>\n\n        <div className=\"flex flex-col items-center mb-6\">\n          <label className=\"w-full flex flex-col items-center px-4 py-6 bg-white rounded-lg border-2 border-dashed border-blue-300 cursor-pointer hover:bg-blue-50\">\n            <svg className=\"w-12 h-12 text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n            </svg>\n            <span className=\"mt-2 text-base font-medium text-gray-700\">\n              {selectedImage ? selectedImage.name : 'Выберите изображение'}\n            </span>\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleImageChange}\n              className=\"hidden\"\n            />\n          </label>\n        </div>\n\n        <button\n          onClick={handleSubmit}\n          disabled={!selectedImage}\n          className={`w-full py-3 px-4 rounded-md text-white font-medium ${selectedImage ? 'bg-blue-500 hover:bg-blue-600' : 'bg-gray-400 cursor-not-allowed'}`}\n        >\n          Отправить\n        </button>\n\n        {predictedClass && (\n          <div className=\"mt-6 p-4 bg-blue-50 rounded-md\">\n            <h2 className=\"text-lg font-semibold text-center\">Предсказанный класс: <span className=\"text-blue-600\">{predictedClass}</span></h2>\n          </div>\n        )}\n\n        {showManualLabeling && !feedbackSubmitted && (\n          <div className=\"mt-6\">\n            <h3 className=\"text-lg font-medium text-center mb-4\">Разметить вручную:</h3>\n            <div className=\"grid grid-cols-2 gap-2\">\n              {classes.map((classLabel) => (\n                <button\n                  key={classLabel}\n                  onClick={() => handleManualLabel(classLabel)}\n                  className={`py-2 px-4 rounded-md ${selectedManualClass === classLabel ? 'bg-green-500 text-white' : 'bg-gray-200 hover:bg-gray-300'}`}\n                >\n                  {classLabel}\n                </button>\n              ))}\n            </div>\n            {selectedManualClass && (\n              <button\n                onClick={submitFeedback}\n                className=\"w-full mt-4 py-2 px-4 bg-green-500 text-white rounded-md hover:bg-green-600\"\n              >\n                Подтвердить выбор\n              </button>\n            )}\n          </div>\n        )}\n\n        {feedbackSubmitted && (\n          <div className=\"mt-6 p-4 bg-green-50 text-green-700 text-center rounded-md\">\n            Ваш ответ принят\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}